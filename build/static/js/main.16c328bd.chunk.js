(this["webpackJsonpphonebook-revised"]=this["webpackJsonpphonebook-revised"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),u=t.n(o),c=t(4),l=t(2),i=function(e){var n=e.addPerson,t=e.newName,a=e.handleNameChange,o=e.newNumber,u=e.handleNewNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:o,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){return r.a.createElement("li",null,e.person.name," ",e.person.number," ",r.a.createElement("button",{onClick:function(n){return e.handleDeletePerson(e.person.name,e.person.id)}},"delete"))},s=function(e){return e.persons.filter(e.ignore).map((function(n){return r.a.createElement(m,{key:n.id,person:n,handleDeletePerson:e.handleDeletePerson})}))},d=function(e){var n=e.filter,t=e.handler;return r.a.createElement("div",null,"filter by name: ",r.a.createElement("input",{value:n,onChange:t}))},f=t(3),h=t.n(f),p="/api/persons",b=function(){return h.a.get(p).then((function(e){return e.data}))},v=function(e){return h.a.post(p,e)},E=function(e,n){return h.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return console.log("poistamista kutsuttu"),h.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},j=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},w=function(e){var n=Object(a.useState)([]),t=Object(l.a)(n,2),o=t[0],u=t[1],m=Object(a.useState)(""),f=Object(l.a)(m,2),h=f[0],p=f[1],w=Object(a.useState)(""),O=Object(l.a)(w,2),N=O[0],k=O[1],C=Object(a.useState)(""),P=Object(l.a)(C,2),y=P[0],D=P[1],S=Object(a.useState)(null),T=Object(l.a)(S,2),U=T[0],A=T[1];Object(a.useEffect)((function(){b().then((function(e){u(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(j,{message:U}),r.a.createElement(d,{filter:y,handler:function(e){D(e.target.value)}}),r.a.createElement("h2",null,"Add a new person"),r.a.createElement(i,{addPerson:function(e){e.preventDefault();var n={name:h,number:N,id:Math.floor(101*Math.random())};if(o.map((function(e){return e.name})).includes(h)){if(window.confirm("".concat(h," is already added to the phonebook, replace the old number with a new number?"))){var t=o.find((function(e){return e.name===h})),a=Object(c.a)(Object(c.a)({},t),{},{number:N});E(t.id,a).then((function(e){u(o.map((function(e){return e.id!==t.id?e:a}))),setTimeout((function(){A(null)}),5e3),p(""),k(""),A("Updated number for ".concat(h))}))}}else v(n).then((function(e){u(o.concat(e.data)),p(""),k(""),A("Added ".concat(h)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){A(e.response.data.error)}))},newName:h,handleNewNumber:function(e){console.log(e.target.value),k(e.target.value)},newNumber:N,handleNameChange:function(e){console.log(e.target.value),p(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(s,{persons:o,ignore:function(e){return e.name.toUpperCase().includes(y.toUpperCase())},handleDeletePerson:function(e,n){window.confirm("Delete ".concat(e," ?"))&&(g(n).then((function(){u(o.filter((function(e){return e.id!==n}))),A("Removed ".concat(e)),p(""),k("")})).catch((function(n){u(o.filter((function(n){return n.name!==e}))),A("K\xe4ytt\xe4j\xe4 ".concat(e," on jo poistettu palvelimelta."))})),setTimeout((function(){A(null)}),3e3))}}))};t(37);u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.16c328bd.chunk.js.map